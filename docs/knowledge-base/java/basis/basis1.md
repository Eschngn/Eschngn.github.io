---
icon: pen-to-square
date: 2025-06-13
star: 10
sticky: 10
category:
  - Java
tag:
  - Java基础
---
# Java 基础

## 数据类型

### 基本数据类型

Java 中有 8 种基本数据类型，分别为：

- 6 种数字类型： 
  - 4 种整数型：`byte`、`short`、`int`、`long`
  - 2 种浮点型：`float`、`double`
- 1 种字符类型：`char`
- 1 种布尔型：`boolean`。

这 8 种基本数据类型的默认值以及所占空间的大小如下：

| 基本类型  | 位数 | 字节 | 默认值   | 取值范围                                                     | 示例             |
| :-------- | :--- | :--- | :------- | ------------------------------------------------------------ | ---------------- |
| `byte`    | 8    | 1    | 0        | -128 ~ 127                                                   | byte b = 10;     |
| `short`   | 16   | 2    | 0        | -32768（-2^15） ~ 32767（2^15 - 1）                          | short s=1000；   |
| `int`     | 32   | 4    | 0        | -2147483648 ~ 2147483647                                     | int i = 100;     |
| `long`    | 64   | 8    | 0L       | -9223372036854775808（-2^63） ~ 9223372036854775807（2^63 -1） | long l = 10000L; |
| `char`    | 16   | 2    | '\u0000' | 0 ~ 65535（2^16 - 1）                                        | char c = 'A';    |
| `float`   | 32   | 4    | 0.0f     | 1.4E-45 ~ 3.4028235E38，单精度，尾数约7位有效数字            | float f = 3.14f; |
| `double`  | 64   | 8    | 0.0d     | 4.9E-324 ~ 1.7976931348623157E308，双精度，尾数约15~16位有效数字 | double d = 3.1415926;  |
| `boolean` | 1    |      | false    | true、false                                                  | boolean b = true;  |

⚠️**注意：**

1. Java 里使用 `long` 类型的数据一定要在数值后面加上 **L**，否则将作为整型解析。
2. Java 里使用 `float` 类型的数据一定要在数值后面加上 **f 或 F**，否则将无法通过编译。
3. `char a = 'h'`char :单引号，`String a = "hello"` :双引号。

### 包装类型

这八种基本类型对应的包装类型如下：

| 基本类型  | 包装类（位于 `java.lang` 包） |
| --------- | ----------------------------- |
| `byte`    | `Byte`                        |
| `short`   | `Short`                       |
| `int`     | `Integer`                     |
| `long`    | `Long`                        |
| `float`   | `Float`                       |
| `double`  | `Double`                      |
| `char`    | `Character`                   |
| `boolean` | `Boolean`                     |

包装类型的主要作用：

| 用途                         | 说明                                           |
| ---------------------------- | ---------------------------------------------- |
| **集合中使用**               | `List<int>` 是非法的，必须使用 `List<Integer>` |
| **泛型支持**                 | 泛型不支持基本类型，只能用包装类型             |
| **提供实用方法**             | 如 `Integer.parseInt("123")`、`Double.isNaN()` |
| **对象化处理**               | 在需要对象的地方（如反射）使用包装类           |
| **默认值处理（如 Map.get）** | 基本类型不能为 null，包装类型可以              |

包装类型的缓存机制

Java 中的包装类型缓存机制是一种性能优化手段，会对某些包装类的特定数值范围内的对象进行缓存（重用），避免频繁创建新对象。

比如当我们使用：

```java
Integer a = Integer.valueOf(100);
```

而不是：

```java
Integer a = new Integer(100);
```

时，`valueOf()` 方法可能会返回一个**缓存的对象**，而不是新建的。

📦缓存范围

| 包装类             | 缓存范围                   |
| ------------------ | -------------------------- |
| `Byte`             | -128 ~ 127                 |
| `Short`            | -128 ~ 127                 |
| `Integer`          | -128 ~ 127（默认，可配置） |
| `Long`             | -128 ~ 127                 |
| `Character`        | 0 ~ 127                    |
| `Boolean`          | true / false（两个对象）   |
| `Float` / `Double` | ❌ 没有缓存机制             |

> `Float` 和 `Double` 不采用缓存机制，是因为浮点数值的取值范围极广且精度分散，缓存意义不大，反而会浪费内存资源。

🧪 示例：Integer 缓存机制

```java
Integer x = 128;
Integer y = 128;
System.out.println(x == y);       // false （比较的是引用）

Integer a = 100;
Integer b = 100;
System.out.println(a == b);       // true（-128 到 127 缓存）

System.out.println(a.equals(b));  // true（比较值）
```

- `==` 比较的是地址（包装类型是对象引用）；
- `equals()` 比较的是值（包装类中已重写该方法）。

🛠️ Integer 缓存的实现源码

下面是 `Integer.java` 源码：

```java
public static Integer valueOf(int i) {
    if (i >= -128 && i <= 127)  // 缓存范围
        return IntegerCache.cache[i + 128];
    else
        return new Integer(i);
}
```

`Integer` 缓存的上限可以通过 JVM 参数修改：

```ini
-Djava.lang.Integer.IntegerCache.high=1000
```

可将缓存范围改为 `-128 ~ 1000`。

### 两者联系与区别

自动装箱与自动拆箱

```java
int a = 10;                  // 基本类型
Integer b = a;               // 自动装箱（int → Integer）
int c = b;                   // 自动拆箱（Integer → int）
```

⚠️注意：如果频繁拆装箱的话，也会严重影响系统的性能。我们应该尽量避免不必要的拆装箱操作。

基本类型和包装类型的区别：

| 比较维度          | 基本类型（Primitive）    | 包装类型（Wrapper）         |
| ------------- | ------------------ | --------------------- |
| **是否是对象**     | ❌ 否                | ✅ 是，对象（类的实例）          |
| **存储位置**      | 栈内存                | 堆内存（引用）               |
| **默认值**       | 有（如 `int` 为 0）     | 可以为 `null`            |
| **使用范围**      | 不能用于泛型、集合等只支持对象的场景 | 可以用于集合、泛型等            |
| **性能**        | 更高（操作直接在栈上进行）      | 稍低（涉及对象创建与方法调用）       |
| **是否有方法**     | ❌ 没有任何方法           | ✅ 有丰富方法（如 `parseXXX`） |
| **是否支持 null** | ❌ 不支持 null         | ✅ 支持 null             |
| **使用场景**      | 一般用于高性能的数值计算场景     | 一般用于集合、框架、对象传递        |



